(function(t){function e(e){for(var r,o,i=e[0],c=e[1],l=e[2],u=0,d=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);h&&h(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,o=1;o<a.length;o++){var c=a[o];0!==n[c]&&(r=!1)}r&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},n={app:0},s=[];function o(t){return i.p+"js/"+({"stencil-polyfills-css-shim":"stencil-polyfills-css-shim","stencil-polyfills-dom":"stencil-polyfills-dom"}[t]||t)+"."+{"chunk-2d0ac931":"17cfa0f8","chunk-2d0c211b":"b267e68d","chunk-2d0cf315":"295178a0","chunk-2d217def":"b35cd03e","chunk-2d21a9aa":"6003d65f","chunk-2d222cca":"00ff34bf","chunk-2d22895d":"fb20d299","chunk-2d23721e":"2aec4d67","stencil-polyfills-css-shim":"54fc0886","stencil-polyfills-dom":"a351dbf1"}[t]+".js"}function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(t){var e=[],a=n[t];if(0!==a)if(a)e.push(a[2]);else{var r=new Promise((function(e,r){a=n[t]=[e,r]}));e.push(a[2]=r);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=o(t);var l=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(u);var a=n[t];if(0!==a){if(a){var r=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",l.name="ChunkLoadError",l.type=r,l.request=s,a[1](l)}n[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var h=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"061c":function(t,e,a){"use strict";var r=a("1787"),n=a.n(r);n.a},1787:function(t,e,a){},"30bd":function(t,e,a){},"357f":function(t,e,a){},"39aa":function(t,e,a){},"3e4c":function(t,e,a){"use strict";var r=a("45f0"),n=a.n(r);n.a},"45f0":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=a("8c4f"),s=a("2f62"),o=(a("96cf"),a("1da1")),i=a("d4ec"),c=a("bee2"),l=a("81c3"),u=l["d"].Filesystem,h=function(){function t(e){Object(i["a"])(this,t)}return Object(c["a"])(t,[{key:"fileWrite",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e,a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.writeFile({path:"data/"+e,data:a,directory:l["b"].External,encoding:l["c"].UTF8});case 3:r=t.sent,console.log("write",r),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("Unable to write file",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"fileRead",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.readFile({path:"data/"+e,directory:l["b"].External,encoding:l["c"].UTF8});case 2:return a=t.sent,console.log(a),t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"fileAppend",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.appendFile({path:"secrets/text.txt",data:"MORE TESTS",directory:l["b"].External,encoding:l["c"].UTF8});case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},{key:"fileDelete",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.deleteFile({path:"data/"+e,directory:l["b"].External});case 2:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"mkdir",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.mkdir({path:e,directory:l["b"].External,recursive:!1});case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error("Unable to make directory",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"rmdir",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.rmdir({path:"secrets",directory:l["b"].External,recursive:!1});case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error("Unable to remove directory",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"readdir",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.readdir({path:e,directory:l["b"].External});case 3:return a=t.sent,t.abrupt("return",a);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return","error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"readFilePath",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.readFile({path:"file:///var/mobile/Containers/Data/Application/22A433FD-D82D-4989-8BE6-9FC49DEA20BB/Documents/text.txt"});case 3:t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log("readFilePathError"+t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),d=function(){function t(){Object(i["a"])(this,t),this.dataPath="data",this.clothesDataFileName="clothesData.json",this.clothData=-1,this.firstRun=this.firstRun.bind(this),this.addCloth=this.addCloth.bind(this),this._readClothData=this._readClothData.bind(this),this.getClothesList=this.getClothesList.bind(this),this.fileoperator=new h}return Object(c["a"])(t,[{key:"firstRun",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fileoperator.mkdir(this.dataPath);case 2:return e={data:{}},t.next=5,this.fileoperator.fileWrite(this.clothesDataFileName,JSON.stringify(e));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"_readClothData",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=JSON,t.next=3,this.fileoperator.fileRead(this.clothesDataFileName);case 3:t.t1=t.sent,this.clothData=t.t0.parse.call(t.t0,t.t1);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"addCloth",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fileoperator.readdir(this.dataPath);case 2:if(t.t0=t.sent,"error"!==t.t0){t.next=6;break}return t.next=6,this.firstRun();case 6:return this.clothProps=e.clothProps,t.t1=JSON,t.next=10,this.fileoperator.fileRead(this.clothesDataFileName);case 10:return t.t2=t.sent,a=t.t1.parse.call(t.t1,t.t2),a.data[this.clothProps.clothID]=this.clothProps,t.next=15,this.fileoperator.fileWrite(this.clothesDataFileName,JSON.stringify(a));case 15:return t.next=17,e.saveImageBase64(e.imageBase64);case 17:return t.next=19,this._readClothData();case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"getClothesList",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fileoperator.readdir(this.dataPath);case 2:if(t.t0=t.sent,"error"!==t.t0){t.next=6;break}return t.next=6,this.firstRun();case 6:if(-1!==this.clothData){t.next=9;break}return t.next=9,this._readClothData();case 9:for(a in e=[],this.clothData.data)e.push(this.clothData.data[a]);return t.abrupt("return",e);case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getClothBase64",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fileoperator.readdir(this.dataPath);case 2:if(t.t0=t.sent,"error"!==t.t0){t.next=6;break}return t.next=6,this.firstRun();case 6:return t.prev=6,t.next=9,this.fileoperator.fileRead(e+".base64");case 9:return a=t.sent,t.abrupt("return",a);case 13:t.prev=13,t.t1=t["catch"](6),console.log("can't read "+e+".base64",t.t1);case 16:case"end":return t.stop()}}),t,this,[[6,13]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deleteCloth",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.fileoperator.readdir(this.dataPath);case 2:if(t.t0=t.sent,"error"!==t.t0){t.next=6;break}return t.next=6,this.firstRun();case 6:return t.t1=JSON,t.next=9,this.fileoperator.fileRead(this.clothesDataFileName);case 9:return t.t2=t.sent,a=t.t1.parse.call(t.t1,t.t2),delete a.data[e],t.next=14,this.fileoperator.fileWrite(this.clothesDataFileName,JSON.stringify(a));case 14:return r=new h,t.next=17,r.fileDelete(e+".base64");case 17:return t.next=19,this._readClothData();case 19:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),p=function(){function t(e,a,r,n,s,o,c,l,u){Object(i["a"])(this,t),this.dataPath="data",this.clothDataFileName="clothesData.json",this.clothImageFileName="clothesImage.json",this.imageBase64=l,this.saveImageBase64=this.saveImageBase64.bind(this),this.clothProps={clothClass:e,clothSize:a,lastWash:n,suitTemp:s,suitWeather:o,suitSituation:c,color:r,clothID:u||(new Date).getTime()}}return Object(c["a"])(t,[{key:"saveImageBase64",value:function(t){var e=new h;e.fileWrite(this.clothProps.clothID+".base64",t)}}]),t}(),f=function(){function t(){Object(i["a"])(this,t),this.history=null,this.historyFileName="history.json",this.fileoperator=new h}return Object(c["a"])(t,[{key:"_loadHistory",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.t0=JSON,t.next=4,this.fileoperator.fileRead(this.historyFileName);case 4:t.t1=t.sent,e=t.t0.parse.call(t.t0,t.t1),t.next=14;break;case 8:return t.prev=8,t.t2=t["catch"](0),e={data:{}},console.log("create cloth history.json",t.t2),t.next=14,this.fileoperator.fileWrite(this.historyFileName,JSON.stringify(e));case 14:this.history=e;case 15:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"getHistory",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.history){t.next=3;break}return t.next=3,this._loadHistory();case 3:return t.abrupt("return",this.history);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"addHistory",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.history){t.next=3;break}return t.next=3,this._loadHistory();case 3:return this.history[e.unixTime]=e,t.next=6,this.fileoperator.fileWrite(this.historyFileName,JSON.stringify(this.history));case 6:return t.next=8,this._loadHistory();case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"deleteHistory",value:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.history){t.next=3;break}return t.next=3,this._loadHistory();case 3:return delete this.history[e],t.next=6,this.fileoperator.fileWrite(this.historyFileName,JSON.stringify(this.history));case 6:return t.next=8,this._loadHistory();case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}]),t}(),v=function t(e,a,r){Object(i["a"])(this,t),this.unixTime=e,this.clothIDList=a,this.weather=r};r["a"].use(s["a"]);var m=new s["a"].Store({state:{clothesStorageHandle:new d,clothesObjectList:[],historyHandle:new f,history:null},mutations:{},actions:{loadClothStorage:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.state,a.next=3,e.state.clothesStorageHandle.getClothesList();case 3:r.clothesObjectList=a.sent;case 4:case"end":return a.stop()}}),a)})))()},deleteCloth:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.dispatch,r.next=3,a.state.clothesStorageHandle.deleteCloth(e);case 3:n("flashClothStorage");case 4:case"end":return r.stop()}}),r)})))()},flashClothStorage:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state,a=t.dispatch,e.next=4,a("loadClothStorage");case 4:case"end":return e.stop()}}),e)})))()},addHistory:function(t,e){return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.state,n=t.dispatch,a.next=3,r.historyHandle.addHistory(e);case 3:return a.next=5,n("loadHistory");case 5:case"end":return a.stop()}}),a)})))()},loadHistory:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.state,t.dispatch,e.next=4,a.historyHandle.getHistory();case 4:a.history=e.sent;case 5:case"end":return e.stop()}}),e)})))()},deleteHistory:function(t,e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.dispatch,r.next=3,a.state.historyHandle.deleteHistory(e);case 3:return r.next=5,n("loadHistory");case 5:case"end":return r.stop()}}),r)})))()},flashHistory:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state,a=t.dispatch,e.next=4,a("loadHistory");case 4:case"end":return e.stop()}}),e)})))()}}}),g=m,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("NavBarTop",{attrs:{title:t.title,rightButtonClickHandle:t.changePlusmenuStatus}}),a("transition",{attrs:{name:"fade"}},[t.plusMenuShow?a("PlusMenu",{attrs:{changeAddClothPopupShow:t.changeAddClothPopupShow,changeAddClothBase64:t.changeAddClothBase64},on:{hidePlusMenu:t.changePlusmenuStatus}}):t._e()],1),a("div",{attrs:{id:"content-view"}},[a("keep-alive",[a("router-view")],1)],1),a("NavBarBottom",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}}),a("van-popup",{style:{height:"85%"},attrs:{round:"",position:"bottom"},model:{value:t.addClothPopupShow,callback:function(e){t.addClothPopupShow=e},expression:"addClothPopupShow"}},[a("div",{attrs:{id:"cloth-props-popup-window"}},[a("span",{attrs:{id:"title"}},[t._v("设置衣物详情")]),a("div",{staticClass:"cloth-props",attrs:{id:"cloth-class"}},[a("span",{staticClass:"props-title"},[t._v("分类")]),a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.newClothProps.clothClass,callback:function(e){t.$set(t.newClothProps,"clothClass",e)},expression:"newClothProps.clothClass"}},[a("van-radio",{attrs:{name:"上装"}},[t._v("上装")]),a("van-radio",{attrs:{name:"下装"}},[t._v("下装")]),a("van-radio",{attrs:{name:"鞋子"}},[t._v("鞋子")])],1)],1),a("div",{staticClass:"cloth-props",attrs:{id:"cloth-size"}},[a("span",{staticClass:"props-title"},[t._v("尺寸")]),a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:t.newClothProps.clothSize,callback:function(e){t.$set(t.newClothProps,"clothSize",e)},expression:"newClothProps.clothSize"}},[a("van-radio",{attrs:{name:"小"}},[t._v("小")]),a("van-radio",{attrs:{name:"中"}},[t._v("中")]),a("van-radio",{attrs:{name:"大"}},[t._v("大")])],1)],1),a("div",{staticClass:"cloth-props",attrs:{id:"color"}},[a("span",{staticClass:"props-title"},[t._v("颜色")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newClothProps.color,expression:"newClothProps.color"}],attrs:{type:"color"},domProps:{value:t.newClothProps.color},on:{input:function(e){e.target.composing||t.$set(t.newClothProps,"color",e.target.value)}}})]),a("div",{staticClass:"cloth-props",attrs:{id:"suit-weather"}},[a("span",{staticClass:"props-title"},[t._v("适用天气")]),a("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:t.newClothProps.suitWeather,callback:function(e){t.$set(t.newClothProps,"suitWeather",e)},expression:"newClothProps.suitWeather"}},[a("van-checkbox",{attrs:{shape:"square",name:"晴天"}},[t._v("晴天")]),a("van-checkbox",{attrs:{shape:"square",name:"烈日"}},[t._v("烈日")]),a("van-checkbox",{attrs:{shape:"square",name:"阴天"}},[t._v("阴天")]),a("van-checkbox",{attrs:{shape:"square",name:"雨天"}},[t._v("雨天")]),a("van-checkbox",{attrs:{shape:"square",name:"雾天"}},[t._v("雾天")]),a("van-checkbox",{attrs:{shape:"square",name:"雪天"}},[t._v("雪天")])],1)],1),a("div",{staticClass:"cloth-props",attrs:{id:"suit-temp"}},[a("span",{staticClass:"props-title"},[t._v("适用温度")]),a("van-stepper",{attrs:{min:"-10",max:"40"},model:{value:t.newClothProps.suitTemp,callback:function(e){t.$set(t.newClothProps,"suitTemp",e)},expression:"newClothProps.suitTemp"}})],1),a("div",{staticClass:"cloth-props",attrs:{id:"suit-weather"}},[a("span",{staticClass:"props-title"},[t._v("适用场合")]),a("van-checkbox-group",{attrs:{direction:"horizontal"},model:{value:t.newClothProps.suitSituation,callback:function(e){t.$set(t.newClothProps,"suitSituation",e)},expression:"newClothProps.suitSituation"}},[a("van-checkbox",{attrs:{shape:"square",name:"学习"}},[t._v("学习")]),a("van-checkbox",{attrs:{shape:"square",name:"工作"}},[t._v("工作")]),a("van-checkbox",{attrs:{shape:"square",name:"会议"}},[t._v("会议")]),a("van-checkbox",{attrs:{shape:"square",name:"运动"}},[t._v("运动")]),a("van-checkbox",{attrs:{shape:"square",name:"休闲"}},[t._v("休闲")])],1)],1),a("div",{staticClass:"cloth-props",attrs:{id:"last-wash"}},[a("span",{staticClass:"props-title"},[t._v("上次洗涤距今 (天)")]),a("van-stepper",{attrs:{min:"0",max:"1000"},model:{value:t.newClothProps.lastWash,callback:function(e){t.$set(t.newClothProps,"lastWash",e)},expression:"newClothProps.lastWash"}})],1),a("van-button",{attrs:{block:"",loading:t.submitButtonLoading,"loading-text":"添加中",type:"primary","loading-type":"spinner",size:"large"},on:{click:t.submitButtonClicked}},[t._v("添加衣物")])],1)])],1)},w=[],C=(a("d3b7"),a("ddb0"),a("ac28")),k=a("2ed4"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"main-component"}},[a("Weather",{ref:"weather"}),a("div",{staticClass:"cloth-choser"},[a("div",{staticClass:"cloth-class-span"},[t._v("上装")]),a("ClothChoser",{attrs:{clothClass:"上装",onUserChoseCloth:t.onUserChoseCloth}})],1),a("div",{staticClass:"cloth-choser"},[a("div",{staticClass:"cloth-class-span"},[t._v("下装")]),a("ClothChoser",{attrs:{clothClass:"下装",onUserChoseCloth:t.onUserChoseCloth}})],1),a("div",{staticClass:"cloth-choser"},[a("div",{staticClass:"cloth-class-span"},[t._v("鞋子")]),a("ClothChoser",{attrs:{clothClass:"鞋子",onUserChoseCloth:t.onUserChoseCloth}})],1),a("div",{style:{boxShadow:"0px 1px "+t.btnShadowBlur+"px 1px green"},attrs:{id:"user-chose-button"},on:{click:t.onUserChoseButtonClicked}},[a("span",[t._v("选定今日搭配")])])],1)},x=[];a("fb6a"),a("4d63"),a("ac1f"),a("25f0"),a("4d90"),a("5319");function O(t){function e(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}return e(t.slice(1))}function _(t,e){return Math.floor(Math.random()*(e-t)+t)}var j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"weather"}},[a("div",{attrs:{id:"today"},on:{click:t.showWeather}},[a("div",{attrs:{id:"city"}},[t._v(t._s(this.city))]),a("div",{attrs:{id:"day"}},[t._v(" "+t._s(t.today?t.today.date.slice(0,-3):"")+" ")]),a("div",{attrs:{id:"week"}},[t._v(" "+t._s(t.today?t.today.date.slice(-3):"")+" ")]),a("div",{attrs:{id:"type"}},[t._v(t._s(t.today?t.today.type:""))]),a("div",{attrs:{id:"high"}},[t._v(t._s(t.today?t.today.high:""))]),a("div",{attrs:{id:"low"}},[t._v(t._s(t.today?t.today.low:""))]),a("div",{attrs:{id:"fengxiang"}},[t._v(t._s(t.today?t.today.fengxiang:""))]),a("div",{attrs:{id:"fengli"}},[t._v(t._s(t.today?t.today.fengli.slice(9,-3):""))])])])},P=[];a("d81d");function S(t){return D.apply(this,arguments)}function D(){return D=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://wthrcdn.etouch.cn/weather_mini?city="+e);case 2:return a=t.sent,t.next=5,a.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)}))),D.apply(this,arguments)}var R=S,B=a("2241"),H={name:"Weather",data:function(){return{city:null,weatherObject:null,today:null,nextDay:null,nextNextDay:null}},beforeCreate:function(){},created:function(){this.getWeather()},methods:{getUserCity:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.city="郑州",e.abrupt("return","郑州");case 2:case"end":return e.stop()}}),e)})))()},getWeather:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=R,e.next=3,t.getUserCity();case 3:return e.t1=e.sent,e.next=6,(0,e.t0)(e.t1);case 6:a=e.sent,console.log("tetsttest",a),t.weatherObject=a,t.today=a.data.forecast[0],t.nextDay=a.data.forecast[1],t.nextNextDay=a.data.forecast[2];case 12:case"end":return e.stop()}}),e)})))()},showWeather:function(){var t="";[this.today,this.nextDay,this.nextNextDay].map((function(e,a){t+=0===a?"今天:\n":1===a?"明天:\n":"后天:\n",t+=e.date+" "+e.type+" "+e.low.slice(3)+"~"+e.high.slice(3)+" "+e.fengxiang+" "+e.fengli.slice(9,-3)+"\n\n"})),B["a"].alert({title:this.city+"天气",message:t})}}},T=H,I=(a("c746"),a("2877")),L=Object(I["a"])(T,j,P,!1,null,"61c313c2",null),$=L.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.clothObjectList.length>0?a("SingleCloth",{attrs:{clothObject:t.clothObjectList[t.chosedIndex]},on:{click:function(t){t.stopPropagation()}},nativeOn:{click:function(e){return t.onChoserClicked(e)}}}):t._e(),a("van-overlay",{attrs:{show:t.modalShow,"lock-scroll":!1},on:{click:function(e){t.modalShow=!1}}},[a("div",{staticClass:"cloth-list"},t._l(t.clothObjectList,(function(e,r){return a("SingleCloth",{key:e.clothID,attrs:{clothObject:e},on:{click:function(t){t.stopPropagation()}},nativeOn:{click:function(e){return function(){return t.onChoserClicked(r)}()}}})})),1)])],1)},E=[],F=(a("4de4"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{style:{backgroundColor:"rgba("+t.rgba.r+","+t.rgba.g+","+t.rgba.b+",0.2)"},attrs:{id:"single-cloth"},on:{click:function(){return t.showClothDetail?t.showClothDetail(t.clothObject):function(){}}}},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.imageShow,expression:"imageShow"}],style:{boxShadow:"0 0 5px 0.1px "+t.clothObject.color},attrs:{id:"cloth-image",src:"data:text/html;base64,"+this.imageBase64,alt:"IMG"}}),a("div",{attrs:{id:"cloth-props"}},[a("div",{staticClass:"prop",attrs:{id:"ccloth-class"}},[a("span",{attrs:{id:"name"}},[t._v("分类:")]),a("span",{attrs:{id:"prop"},domProps:{textContent:t._s(t.clothObject.clothClass)}})]),a("div",{staticClass:"prop",attrs:{id:"cloth-size"}},[a("span",{attrs:{id:"name"}},[t._v("尺寸:")]),a("span",{attrs:{id:"prop"},domProps:{textContent:t._s(t.clothObject.clothSize)}})]),a("div",{staticClass:"prop",attrs:{id:"color"}},[a("span",{attrs:{id:"name"}},[t._v("颜色:")]),a("div",{style:{backgroundColor:t.clothObject.color},attrs:{id:"color-block"}})]),a("div",{staticClass:"prop",attrs:{id:"suit-temp"}},[a("span",{attrs:{id:"name"}},[t._v("适用温度:")]),a("span",{attrs:{id:"prop"},domProps:{textContent:t._s(t.clothObject.suitTemp+" ℃")}})]),a("div",{staticClass:"prop",attrs:{id:"lastwash"}},[a("span",{attrs:{id:"name"}},[t._v("上次洗涤距今:")]),a("span",{attrs:{id:"prop"},domProps:{textContent:t._s(Math.floor(((new Date).getTime()-t.clothObject.lastWash)/864e5)+" 天")}})])])])}),W=[],z=(a("e372"),{name:"SingleCloth",props:["clothObject","showClothDetail"],data:function(){return{imageBase64:null,imageShow:!1}},created:function(){this.getClothImage()},methods:{getClothImage:function(){var t=this;this.$store.state.clothesStorageHandle.getClothBase64(this.clothObject.clothID).then((function(e){t.imageBase64=e,t.imageShow=!0}))}},computed:{rgba:function(){var t=O(this.clothObject.color);return t}},watch:{clothObject:function(){this.getClothImage()}}}),M=z,U=Object(I["a"])(M,F,W,!1,null,null,null),q=U.exports,A=a("d399"),J=a("6e47"),G=a("e41f");r["a"].use(A["a"]),r["a"].use(J["a"]),r["a"].use(G["a"]);var K={name:"ClothChoser",props:["clothClass","onUserChoseCloth"],components:{SingleCloth:q},data:function(){return{chosedIndex:0,modalShow:!1}},mounted:function(){var t=this;0===this.clothObjectList.length&&this.$store.dispatch("loadClothStorage").then((function(){t.onUserChoseCloth(t.clothClass,t.clothObjectList[0])}))},methods:{onChoserClicked:function(t){var e=this;this.modalShow?(this.chosedIndex=t,this.onUserChoseCloth(this.clothClass,this.clothObjectList[t])):new Promise((function(t,e){var a=A["a"].loading({message:"计算推荐列表",forbidClick:!0});setTimeout((function(){a.clear(),t()}),_(200,500))})).then((function(){e.modalShow=!0}))}},computed:{clothObjectList:function(){var t=this;return this.$store.state.clothesObjectList.filter((function(e){return e.clothClass===t.clothClass}))}},watch:{}},Q=K,V=(a("cdf0"),Object(I["a"])(Q,N,E,!1,null,"70917466",null)),X=V.exports,Y={name:"MainComponent",data:function(){return{btnShadowBlur:3,userChosedCloth:{}}},components:{Weather:$,ClothChoser:X},created:function(){var t=this;setInterval((function(){25===t.btnShadowBlur?t.btnShadowBlur=1:t.btnShadowBlur=25}),1e3)},methods:{onUserChoseCloth:function(t,e){this.userChosedCloth[t]=e},onUserChoseButtonClicked:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.state.historyHandle,a=new v((new Date).getTime(),[t.userChosedCloth["上装"].clothID,t.userChosedCloth["下装"].clothID,t.userChosedCloth["鞋子"].clothID],t.$refs.weather.weatherObject.data.forecast[0]),e.next=4,t.$store.dispatch("addHistory",a);case 4:r=A["a"].success("已记录"),setTimeout((function(){return r.clear()}),800);case 6:case"end":return e.stop()}}),e)})))()}}},Z=Y,tt=(a("8481"),Object(I["a"])(Z,y,x,!1,null,"49a52070",null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"storage"}},[a("van-tabs",{attrs:{type:"card",animated:"",swipeable:""}},[a("van-tab",{attrs:{title:"上装"}},t._l(this.upClothObjectList,(function(e){return a("div",{key:e.clothID},[a("SingleCloth",{attrs:{clothObject:e,showClothDetail:t.showClothDetail}})],1)})),0),a("van-tab",{attrs:{title:"下装"}},t._l(this.downClothObjectList,(function(e){return a("div",{key:e.clothID},[a("SingleCloth",{attrs:{clothObject:e,showClothDetail:t.showClothDetail}})],1)})),0),a("van-tab",{attrs:{title:"鞋子"}},t._l(this.shoesClothObjectList,(function(e){return a("div",{key:e.clothID},[a("SingleCloth",{attrs:{clothObject:e,showClothDetail:t.showClothDetail}})],1)})),0),a("van-tab",{attrs:{title:"全部"}},t._l(this.clothObjectList,(function(e){return a("div",{key:e.clothID},[a("SingleCloth",{attrs:{clothObject:e,showClothDetail:t.showClothDetail}})],1)})),0)],1),a("div",{attrs:{id:"detail-popup"}},[a("van-popup",{style:{height:"90vh",width:"90vw"},attrs:{round:"",closeable:"",position:"center"},model:{value:t.detailPopupShow,callback:function(e){t.detailPopupShow=e},expression:"detailPopupShow"}},[a("div",{attrs:{id:"cloth-props-popup-window"}},[a("span",{attrs:{id:"title"}},[t._v("衣物详情")]),a("div",{staticClass:"cloth-props",attrs:{id:"cloth-class"}},[a("span",{staticClass:"props-title"},[t._v("分类")]),a("van-radio-group",{attrs:{disabled:t.notEditable,direction:"horizontal"},model:{value:t.clickClothProps.clothClass,callback:function(e){t.$set(t.clickClothProps,"clothClass",e)},expression:"clickClothProps.clothClass"}},[a("van-radio",{attrs:{name:"上装"}},[t._v("上装")]),a("van-radio",{attrs:{name:"下装"}},[t._v("下装")]),a("van-radio",{attrs:{name:"鞋子"}},[t._v("鞋子")])],1)],1),a("div",{staticClass:"cloth-props",attrs:{id:"cloth-size"}},[a("span",{staticClass:"props-title"},[t._v("尺寸")]),a("van-radio-group",{attrs:{disabled:t.notEditable,direction:"horizontal"},model:{value:t.clickClothProps.clothSize,callback:function(e){t.$set(t.clickClothProps,"clothSize",e)},expression:"clickClothProps.clothSize"}},[a("van-radio",{attrs:{name:"小"}},[t._v("小")]),a("van-radio",{attrs:{name:"中"}},[t._v("中")]),a("van-radio",{attrs:{name:"大"}},[t._v("大")])],1)],1),a("div",{staticClass:"cloth-props",attrs:{id:"color"}},[a("span",{staticClass:"props-title"},[t._v("颜色")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.clickClothProps.color,expression:"clickClothProps.color"}],attrs:{type:"color",disabled:t.notEditable},domProps:{value:t.clickClothProps.color},on:{input:function(e){e.target.composing||t.$set(t.clickClothProps,"color",e.target.value)}}})]),a("div",{staticClass:"cloth-props",attrs:{id:"suit-weather"}},[a("span",{staticClass:"props-title"},[t._v("适用天气")]),a("van-checkbox-group",{attrs:{direction:"horizontal",disabled:t.notEditable},model:{value:t.clickClothProps.suitWeather,callback:function(e){t.$set(t.clickClothProps,"suitWeather",e)},expression:"clickClothProps.suitWeather"}},[a("van-checkbox",{attrs:{shape:"square",name:"晴天"}},[t._v("晴天")]),a("van-checkbox",{attrs:{shape:"square",name:"烈日"}},[t._v("烈日")]),a("van-checkbox",{attrs:{shape:"square",name:"阴天"}},[t._v("阴天")]),a("van-checkbox",{attrs:{shape:"square",name:"雨天"}},[t._v("雨天")]),a("van-checkbox",{attrs:{shape:"square",name:"雾天"}},[t._v("雾天")]),a("van-checkbox",{attrs:{shape:"square",name:"雪天"}},[t._v("雪天")])],1)],1),a("div",{staticClass:"cloth-props",attrs:{id:"suit-temp"}},[a("span",{staticClass:"props-title"},[t._v("适用温度")]),a("van-stepper",{attrs:{disabled:t.notEditable,min:"-10",max:"40"},model:{value:t.clickClothProps.suitTemp,callback:function(e){t.$set(t.clickClothProps,"suitTemp",e)},expression:"clickClothProps.suitTemp"}})],1),a("div",{staticClass:"cloth-props",attrs:{id:"suit-weather"}},[a("span",{staticClass:"props-title"},[t._v("适用场合")]),a("van-checkbox-group",{attrs:{direction:"horizontal",disabled:t.notEditable},model:{value:t.clickClothProps.suitSituation,callback:function(e){t.$set(t.clickClothProps,"suitSituation",e)},expression:"clickClothProps.suitSituation"}},[a("van-checkbox",{attrs:{shape:"square",name:"学习"}},[t._v("学习")]),a("van-checkbox",{attrs:{shape:"square",name:"工作"}},[t._v("工作")]),a("van-checkbox",{attrs:{shape:"square",name:"会议"}},[t._v("会议")]),a("van-checkbox",{attrs:{shape:"square",name:"运动"}},[t._v("运动")]),a("van-checkbox",{attrs:{shape:"square",name:"休闲"}},[t._v("休闲")])],1)],1),a("div",{staticClass:"cloth-props",attrs:{id:"last-wash"}},[a("span",{staticClass:"props-title"},[t._v("上次洗涤距今 (天)")]),a("van-stepper",{attrs:{disabled:t.notEditable,min:"0",max:"1000"},model:{value:t.clickClothProps.lastWash,callback:function(e){t.$set(t.clickClothProps,"lastWash",e)},expression:"clickClothProps.lastWash"}})],1),a("van-button",{staticClass:"modify-button",attrs:{block:"",loading:t.buttonLoading,"loading-text":"修改中","loading-type":"spinner",type:t.notEditable?"info":"primary",size:"large",round:""},on:{click:t.detailButtonClicked}},[t._v(t._s(t.notEditable?"修改属性":"保存修改"))]),a("van-button",{staticClass:"delete-button",attrs:{type:"danger",block:"",size:"large",round:""},on:{click:t.onDeleteButtonClicked}},[t._v("删除")])],1)])],1)],1)},rt=[],nt=(a("a762"),a("0b33")),st=a("5e46");r["a"].use(A["a"]),r["a"].use(nt["a"]),r["a"].use(st["a"]);var ot={name:"Storage",components:{SingleCloth:q},data:function(){return{clickClothProps:{clothClass:null,clothSize:null,color:"#FFFFFF",lastWash:null,suitTemp:26,suitWeather:[],suitSituation:[],imageBase64:null},oldClothProps:null,detailPopupShow:!1,notEditable:!0,buttonLoading:!1}},created:function(){var t=this;this.$store.dispatch("loadClothStorage").then((function(){t.clothesObjectList=t.$store.state.clothesObjectList}))},methods:{showClothDetail:function(t){var e=JSON.parse(JSON.stringify(t));e.lastWash=Math.floor(((new Date).getTime()-e.lastWash)/864e5),this.clickClothProps=e,this.detailPopupShow=!0},detailButtonClicked:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.notEditable){e.next=49;break}if(JSON.stringify(t.oldClothProps)!==JSON.stringify(t.clickClothProps)){e.next=4;break}return t.notEditable=!0,e.abrupt("return");case 4:t.buttonLoading=!0,a=!0,e.t0=regeneratorRuntime.keys(t.clickClothProps);case 7:if((e.t1=e.t0()).done){e.next=21;break}if(r=e.t1.value,n=t.clickClothProps[r],!(n instanceof Array)){e.next=16;break}if(0!==n.length){e.next=14;break}return a=!1,e.abrupt("break",21);case 14:e.next=19;break;case 16:if(null!==n){e.next=19;break}return a=!1,e.abrupt("break",21);case 19:e.next=7;break;case 21:if(a){e.next=25;break}return s=A["a"].fail("请完整填写衣物详情"),setTimeout((function(){return s.clear()}),800),e.abrupt("return");case 25:return t.submitButtonLoading=!0,e.t2=p,e.t3=t.clickClothProps.clothClass,e.t4=t.clickClothProps.clothSize,e.t5=t.clickClothProps.color,e.t6=(new Date).getTime()-864e5*t.clickClothProps.lastWash,e.t7=t.clickClothProps.suitTemp,e.t8=t.clickClothProps.suitWeather,e.t9=t.clickClothProps.suitSituation,e.next=36,t.clothesStorageHandle.getClothBase64(t.clickClothProps.clothID);case 36:return e.t10=e.sent,e.t11=t.clickClothProps.clothID,o=new e.t2(e.t3,e.t4,e.t5,e.t6,e.t7,e.t8,e.t9,e.t10,e.t11),i=setTimeout((function(){A["a"].fail("读写数据超时"),t.notEditable=!0,t.buttonLoading=!1}),8e3),e.next=42,t.clothesStorageHandle.addCloth(o);case 42:clearTimeout(i),A["a"].success("修改成功"),t.buttonLoading=!1,t.$store.dispatch("flashClothStorage"),t.notEditable=!0,e.next=51;break;case 49:t.notEditable=!1,t.oldClothProps=JSON.parse(JSON.stringify(t.clickClothProps));case 51:case"end":return e.stop()}}),e)})))()},onDeleteButtonClicked:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("deleteCloth",t.clickClothProps.clothID);case 2:t.detailPopupShow=!1,a=A["a"].success("已删除"),setTimeout((function(){return a.clear()}),800);case 5:case"end":return e.stop()}}),e)})))()}},computed:{clothObjectList:function(){return this.$store.state.clothesObjectList},clothesStorageHandle:function(){return this.$store.state.clothesStorageHandle},upClothObjectList:function(){return this.clothObjectList.filter((function(t){return"上装"===t.clothClass}))},downClothObjectList:function(){return this.clothObjectList.filter((function(t){return"下装"===t.clothClass}))},shoesClothObjectList:function(){return this.clothObjectList.filter((function(t){return"鞋子"===t.clothClass}))}},watch:{clothObjectList:function(t){console.log("storage flashed",t)}}},it=ot,ct=(a("9751"),Object(I["a"])(it,at,rt,!1,null,"6c932267",null)),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"history"}},t._l(t.historyObjectList,(function(t){return a("SingleHistory",{key:t.unixTime,attrs:{historyObject:t}})})),1)},ht=[],dt=(a("e49f"),function(){var t=this,e=this,a=e.$createElement,r=e._self._c||a;return r("div",{attrs:{id:"single-history"},on:{touchstart:function(){return t.longPressDeleteDialogHandle("mousedown")},touchend:function(){return t.longPressDeleteDialogHandle("mouseup")},touchmove:function(){return t.longPressDeleteDialogHandle("mousemove")},mousedown:function(){return t.longPressDeleteDialogHandle("mousedown")},mouseup:function(){return t.longPressDeleteDialogHandle("mouseup")},mousemove:function(){return t.longPressDeleteDialogHandle("mousemove")}}},[r("van-swipe-cell",{scopedSlots:e._u([{key:"right",fn:function(){return[r("van-button",{style:{height:"100%"},attrs:{block:"",type:"danger",text:"删除"},on:{click:e.showDeleteDialog}})]},proxy:!0}])},[r("div",{attrs:{id:"information"}},[r("div",{attrs:{id:"time"}},[r("div",{attrs:{id:"date"}},[e._v(" "+e._s(e.historyObject?new Date(e.historyObject.unixTime).toLocaleDateString():"")+" ")]),r("div",{attrs:{id:"clock"}},[e._v(" "+e._s(e.historyObject?new Date(e.historyObject.unixTime).toLocaleTimeString():"")+" ")])]),r("div",{attrs:{id:"weather"}},[r("div",{attrs:{id:"type"}},[e._v(" "+e._s(e.historyObject?e.historyObject.weather.type:"")+" ")]),r("div",{attrs:{id:"high"}},[e._v(" "+e._s(e.historyObject?e.historyObject.weather.high:"")+" ")]),r("div",{attrs:{id:"low"}},[e._v(" "+e._s(e.historyObject?e.historyObject.weather.low:"")+" ")]),r("div",{attrs:{id:"fengxiang"}},[e._v(" "+e._s(e.historyObject?e.historyObject.weather.fengxiang:"")+" ")]),r("div",{attrs:{id:"fengli"}},[e._v(" "+e._s(e.historyObject?e.historyObject.weather.fengli.slice(9,-3):"")+" ")])])]),r("div",{attrs:{id:"image"}},[r("div",{staticClass:"cloth-image"},[void 0!==e.upImageBase64?r("img",{attrs:{src:"data:text/html;base64,"+e.upImageBase64}}):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:void 0===e.upImageBase64,expression:"upImageBase64 === undefined"}]},[e._v("衣物已删除")])]),r("div",{staticClass:"cloth-image"},[void 0!==e.downImageBase64?r("img",{attrs:{src:"data:text/html;base64,"+e.downImageBase64}}):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:void 0===e.downImageBase64,expression:"downImageBase64 === undefined"}]},[e._v("衣物已删除")])]),r("div",{staticClass:"cloth-image"},[void 0!==e.shoesImageBase64?r("img",{attrs:{src:"data:text/html;base64,"+e.shoesImageBase64}}):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:void 0===e.shoesImageBase64,expression:"shoesImageBase64 === undefined"}]},[e._v("衣物已删除")])])])])],1)}),pt=[],ft=a("c36e");r["a"].use(B["a"]),r["a"].use(A["a"]),r["a"].use(ft["a"]);var vt={name:"SingleHistory",props:["historyObject"],data:function(){return{time:null,upImageBase64:null,downImageBase64:null,shoesImageBase64:null,deleteDialogTimer:null,mousemoveCount:0}},created:function(){this.loadImage()},methods:{loadImage:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.clothesStorageHandle.getClothBase64(t.historyObject.clothIDList[0]);case 2:return t.upImageBase64=e.sent,e.next=5,t.clothesStorageHandle.getClothBase64(t.historyObject.clothIDList[1]);case 5:return t.downImageBase64=e.sent,e.next=8,t.clothesStorageHandle.getClothBase64(t.historyObject.clothIDList[2]);case 8:t.shoesImageBase64=e.sent;case 9:case"end":return e.stop()}}),e)})))()},showDeleteDialog:function(){var t=this;B["a"].confirm({title:"确定？",message:"确认删除本条记录？",confirmButtonColor:"red",confirmButtonText:"删除"}).then((function(){t.$store.dispatch("deleteHistory",t.historyObject.unixTime)})).then((function(){A["a"].success("已删除")})).catch((function(){}))},longPressDeleteDialogHandle:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:"mousedown"===t&&(e.deleteDialogTimer=setTimeout((function(){e.showDeleteDialog()}),800)),"mouseup"===t&&clearTimeout(e.deleteDialogTimer),"mousemove"===t&&(e.mousemoveCount++,e.mousemoveCount>3&&(clearTimeout(e.deleteDialogTimer),e.mousemoveCount=0));case 3:case"end":return a.stop()}}),a)})))()}},computed:{clothesStorageHandle:function(){return this.$store.state.clothesStorageHandle}}},mt=vt,gt=(a("a36b"),Object(I["a"])(mt,dt,pt,!1,null,"441a109a",null)),bt=gt.exports,wt={name:"History",components:{SingleHistory:bt},data:function(){return{historyObjectList:[]}},created:function(){this.loadHistoryObjectList()},methods:{loadHistoryObjectList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.history){e.next=3;break}return e.next=3,t.$store.dispatch("loadHistory");case 3:for(n in a=t.history,console.log("testtttttt",t.history),r=[],a)r.push(a[n]);r.sort((function(t,e){return e.unixTime-t.unixTime})),t.historyObjectList=r;case 9:case"end":return e.stop()}}),e)})))()}},computed:{historyHandle:function(){return this.$store.state.historyHandle},history:function(){return this.$store.state.history}},watch:{history:function(){this.loadHistoryObjectList()}}},Ct=wt,kt=Object(I["a"])(Ct,ut,ht,!1,null,null,null),yt=kt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"settings"}},[a("van-cell-group",[a("van-cell",{attrs:{center:"",size:"large",title:"自动更新"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[a("van-switch",{attrs:{"active-color":"#07c160",size:"24"},model:{value:t.autoUpdate,callback:function(e){t.autoUpdate=e},expression:"autoUpdate"}})]},proxy:!0}])}),a("van-cell",{attrs:{center:"",size:"large",title:"夜间模式"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[a("van-switch",{attrs:{"active-color":"#07c160",size:"24"},on:{change:t.onDarkmodeChange},model:{value:t.darkmode,callback:function(e){t.darkmode=e},expression:"darkmode"}})]},proxy:!0}])})],1)],1)},Ot=[],_t=(a("c975"),a("7744")),jt=a("34e9"),Pt=a("1a23");r["a"].use(_t["a"]),r["a"].use(jt["a"]),r["a"].use(Pt["a"]);var St={name:"Settings",data:function(){return{autoUpdate:!0,darkmode:!1}},created:function(){var t=document.getElementsByTagName("body")[0];t.getAttribute("class")&&-1!==t.getAttribute("class").indexOf("dark-mode")&&(this.darkmode=!0)},methods:{onDarkmodeChange:function(t){var e=document.getElementsByTagName("body")[0],a=e.getAttribute("class");a||(a=""),t?e.setAttribute("class",a+" dark-mode"):e.setAttribute("class",a.replace(/dark-mode/g,""))}}},Dt=St,Rt=(a("e70a"),Object(I["a"])(Dt,xt,Ot,!1,null,"245643b4",null)),Bt=Rt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"plus-menu"}},[a("div",{staticClass:"submenu",on:{click:function(e){return t.submenuClicked(0)}}},[t._v("拍照")])])},Tt=[],It=l["d"].Camera;function Lt(){return $t.apply(this,arguments)}function $t(){return $t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,It.getPhoto({quality:90,allowEditing:!0,resultType:l["a"].Base64});case 3:return e=t.sent,t.abrupt("return",e.base64String);case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),$t.apply(this,arguments)}var Nt=Lt;r["a"].use(G["a"]);var Et={name:"PlusMenu",props:["changeAddClothPopupShow","changeAddClothBase64"],data:function(){return{}},mounted:function(){document.addEventListener("mousedown",this.hidePlusMenu)},beforeDestroy:function(){document.removeEventListener("mousedown",this.hidePlusMenu)},methods:{submenuClicked:function(t){switch(t){case 0:this.takePhoto()}this.hidePlusMenu()},takePhoto:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Nt();case 2:a=e.sent,t.changeAddClothPopupShow(),t.changeAddClothBase64(a);case 5:case"end":return e.stop()}}),e)})))()},hidePlusMenu:function(t){this.$emit("hidePlusMenu",t)}}},Ft=Et,Wt=(a("95f6"),Object(I["a"])(Ft,Ht,Tt,!1,null,"32a23f46",null)),zt=Wt.exports,Mt=(a("357f"),a("157a"),a("6b41")),Ut=a("20fb"),qt=a("ee83"),At=a("b650"),Jt=a("9f14"),Gt=a("e27c"),Kt=a("417e"),Qt=a("3acc"),Vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"nav-bar-top"}},[a("div",{attrs:{id:"title"},domProps:{textContent:t._s(t.title)}}),a("div",{attrs:{id:"right-button"},on:{click:t.rightButtonClicked}},[t._v("+")])])},Xt=[],Yt={name:"NavBarTop",props:["rightButtonClickHandle","title"],data:function(){return{}},methods:{rightButtonClicked:function(){this.rightButtonClickHandle.apply(this,arguments)}}},Zt=Yt,te=(a("3e4c"),Object(I["a"])(Zt,Vt,Xt,!1,null,"29b2fc7d",null)),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"nav-bar-bottom"}},[a("div",{staticClass:"nav-item",attrs:{id:"today"},on:{click:function(){return t.navItemClicked(0)}}},[a("div",{attrs:{id:"icon"}},[a("van-icon",{attrs:{name:"home-o",size:"3vh",color:0===t.value?"#1989fa":"#000000"}})],1),a("span",{style:{color:0===t.value?"#1989fa":"#000000"}},[t._v("今日")])]),a("div",{staticClass:"nav-item",attrs:{id:"storage"},on:{click:function(){return t.navItemClicked(1)}}},[a("div",{attrs:{id:"icon"}},[a("van-icon",{attrs:{name:"search",size:"3vh",color:1===t.value?"#1989fa":"#000000"}})],1),a("span",{style:{color:1===t.value?"#1989fa":"#000000"}},[t._v("库存")])]),a("div",{staticClass:"nav-item",attrs:{id:"history"},on:{click:function(){return t.navItemClicked(2)}}},[a("div",{attrs:{id:"icon"}},[a("van-icon",{attrs:{name:"friends-o",size:"3vh",color:2===t.value?"#1989fa":"#000000"}})],1),a("span",{style:{color:2===t.value?"#1989fa":"#000000"}},[t._v("历史")])]),a("div",{staticClass:"nav-item",attrs:{id:"setting"},on:{click:function(){return t.navItemClicked(3)}}},[a("div",{attrs:{id:"icon"}},[a("van-icon",{attrs:{name:"setting-o",size:"3vh",color:3===t.value?"#1989fa":"#000000"}})],1),a("span",{style:{color:3===t.value?"#1989fa":"#000000"}},[t._v("设置")])])])},re=[],ne=a("ad06");r["a"].use(ne["a"]);var se={name:"NavBarBottom",model:{prop:"value",event:"input"},props:["value"],data:function(){return{}},methods:{navItemClicked:function(t){this.$emit("input",t)}}},oe=se,ie=(a("061c"),Object(I["a"])(oe,ae,re,!1,null,"2a3c96e2",null)),ce=ie.exports;r["a"].use(A["a"]),r["a"].use(At["a"]),r["a"].use(qt["a"]),r["a"].use(Ut["a"]),r["a"].use(Kt["a"]),r["a"].use(Qt["a"]),r["a"].use(Mt["a"]),r["a"].use(n["a"]),r["a"].use(C["a"]),r["a"].use(k["a"]),r["a"].use(Jt["a"]),r["a"].use(Gt["a"]);var le={name:"App",components:{MainComponent:et,Storage:lt,History:yt,Settings:Bt,NavBar:Mt["a"],PlusMenu:zt,NavBarTop:ee,NavBarBottom:ce},data:function(){return{active:0,plusMenuShow:!1,addClothPopupShow:!1,newClothProps:{clothClass:null,clothSize:null,color:"#FFFFFF",lastWash:null,suitTemp:26,suitWeather:[],suitSituation:[],imageBase64:null},submitButtonLoading:!1}},created:function(){},methods:{changePlusmenuStatus:function(t){this.plusMenuShow=!this.plusMenuShow},changeAddClothPopupShow:function(){this.addClothPopupShow=!this.addClothPopupShow},changeAddClothBase64:function(t){this.newClothProps.imageBase64=t},submitButtonClicked:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=!0,e.t0=regeneratorRuntime.keys(t.newClothProps);case 2:if((e.t1=e.t0()).done){e.next=16;break}if(r=e.t1.value,n=t.newClothProps[r],!(n instanceof Array)){e.next=11;break}if(0!==n.length){e.next=9;break}return a=!1,e.abrupt("break",16);case 9:e.next=14;break;case 11:if(null!==n){e.next=14;break}return a=!1,e.abrupt("break",16);case 14:e.next=2;break;case 16:if(a){e.next=20;break}return s=A["a"].fail("请完整填写衣物详情"),setTimeout((function(){return s.clear()}),800),e.abrupt("return");case 20:return t.submitButtonLoading=!0,o=new p(t.newClothProps.clothClass,t.newClothProps.clothSize,t.newClothProps.color,(new Date).getTime()-864e5*t.newClothProps.lastWash,t.newClothProps.suitTemp,t.newClothProps.suitWeather,t.newClothProps.suitSituation,t.newClothProps.imageBase64),i=setTimeout((function(){A["a"].fail("读写数据超时"),t.submitButtonLoading=!1,t.addClothPopupShow=!1,t.newClothProps={clothClass:null,clothSize:null,color:null,lastWash:null,suitTemp:26,suitWeather:[],suitSituation:[],imageBase64:null}}),8e3),e.next=25,t.clothesStorageHandle.addCloth(o);case 25:return clearTimeout(i),A["a"].success("添加成功"),t.submitButtonLoading=!1,t.addClothPopupShow=!1,t.newClothProps={clothClass:null,clothSize:null,color:"#FFFFFF",lastWash:null,suitTemp:26,suitWeather:[],suitSituation:[],imageBase64:null},e.next=32,t.$store.dispatch("flashClothStorage");case 32:setTimeout((function(){return console.log("fucker2",t.$store.state.clothesObjectList)}),1e4);case 33:case"end":return e.stop()}}),e)})))()}},computed:{title:function(){switch(this.active){case 0:return"今日";case 1:return"库存";case 2:return"历史";case 3:return"设置";default:return"error"}},clothesStorageHandle:function(){return this.$store.state.clothesStorageHandle}},watch:{active:function(t,e){switch(t){case 0:this.$router.push("/Main");break;case 1:this.$router.push("/Storage");break;case 2:this.$router.push("/History");break;case 3:this.$router.push("/Settings");break}}}},ue=le,he=Object(I["a"])(ue,b,w,!1,null,null,null),de=he.exports,pe=a("8537");Object(pe["a"])(window),r["a"].config.productionTip=!1,r["a"].use(n["a"]),r["a"].use(s["a"]);var fe=[{path:"/Storage",component:lt},{path:"/History",component:yt},{path:"/Settings",component:Bt},{path:"/Main",component:et},{path:"/",redirect:"/Main"}],ve=new n["a"]({routes:fe,mode:"hash"});new r["a"]({router:ve,store:g,render:function(t){return t(de)}}).$mount("#app")},"5c3f":function(t,e,a){var r={"./pwa-action-sheet.entry.js":["cfc4","chunk-2d222cca"],"./pwa-camera-modal-instance.entry.js":["fa8e","chunk-2d23721e"],"./pwa-camera-modal.entry.js":["4977","chunk-2d0c211b"],"./pwa-camera.entry.js":["da8b","chunk-2d22895d"],"./pwa-toast.entry.js":["6357","chunk-2d0cf315"]};function n(t){if(!a.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],n=e[0];return a.e(e[1]).then((function(){return a(n)}))}n.keys=function(){return Object.keys(r)},n.id="5c3f",t.exports=n},"62df":function(t,e,a){},8481:function(t,e,a){"use strict";var r=a("30bd"),n=a.n(r);n.a},"95f6":function(t,e,a){"use strict";var r=a("f29d"),n=a.n(r);n.a},9751:function(t,e,a){"use strict";var r=a("f673"),n=a.n(r);n.a},a36b:function(t,e,a){"use strict";var r=a("39aa"),n=a.n(r);n.a},a762:function(t,e,a){},c746:function(t,e,a){"use strict";var r=a("f752"),n=a.n(r);n.a},cdf0:function(t,e,a){"use strict";var r=a("f5a2"),n=a.n(r);n.a},e372:function(t,e,a){},e49f:function(t,e,a){},e70a:function(t,e,a){"use strict";var r=a("62df"),n=a.n(r);n.a},f29d:function(t,e,a){},f5a2:function(t,e,a){},f673:function(t,e,a){},f752:function(t,e,a){}});
//# sourceMappingURL=app.43b712a4.js.map